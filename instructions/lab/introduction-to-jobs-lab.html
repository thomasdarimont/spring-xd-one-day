<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;5.&nbsp;Introduction to Jobs</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.70.0"><link rel="start" href="index.html" title="Spring XD - Lab Documentation"><link rel="up" href="index.html" title="Spring XD - Lab Documentation"><link rel="prev" href="advanced-streams-lab.html" title="Chapter&nbsp;4.&nbsp;Advanced Streams"><link rel="next" href="customizing-jobs-lab.html" title="Chapter&nbsp;6.&nbsp;Customizing Jobs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.pivotal.io" title="Pivotal"><img style="border:none;" src="images/heading-logo-lhs.jpg"></img></a><a style="border:none;" href="http://www.spring.io" title="The Spring Framework"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/heading-logo-rhs.jpg"></img></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="introduction-to-jobs-lab"></a>Chapter&nbsp;5.&nbsp;Introduction to Jobs</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="introduction-to-jobs-lab-objective"></a>5.1.&nbsp;Objective</h2></div></div></div><p>To deploy a simple batch process in Spring XD, without custom coding.  This lab exercise is based on the
			  <code class="code">batch-basic</code> Github samples repository at
			  <a href="https://github.com/spring-projects/spring-xd-samples" target="_top">https://github.com/spring-projects/spring-xd-samples</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="introduction-to-jobs-basic"></a>5.2.&nbsp;Installing and Running a Basic Batch Job</h2></div></div></div><p>This simple example demonstrate how a Spring XD job can read a csv file, replace the commas with spaces, and output 
			  the result into a new file.</p><div class="orderedlist"><ol type="1" compact><li><p>Examine the contents of the <code class="code">batch-basic/sample.txt</code> file - note it contains a comma-delimited line of text.  
					  Copy the file from the course labs installation directory, into your home directory <code class="code">$HOME</code>.</p></li><li><p>Open the <code class="code">batch-basic/basic_example.xml</code> file and find the <code class="code">itemReader</code> bean.
					  Change the value of the <code class="code">resource</code> property to point to the <code class="code">sample.txt</code> file
					  that you just copied into your home directory.</p><pre class="programlisting">...
	&lt;bean id="itemReader" class="org.springframework.batch.item.file.FlatFileItemReader"&gt;
		&lt;property name="resource" value="file:$HOME/sample.txt" /&gt;
		&lt;property name="lineMapper" ref="lineMapper" /&gt;
	&lt;/bean&gt;
...
</pre><p>Find the <code class="code">itemWriter</code> bean, and change the <code class="code">resource</code> output file location to
					  your home directory (leaving the filename the same).</p><pre class="programlisting">...
	&lt;bean id="itemWriter" class="org.springframework.batch.item.file.FlatFileItemWriter"&gt;
		&lt;property name="resource" value="file:$HOME/sample1out.txt" /&gt;
		&lt;property name="lineAggregator" ref="lineAggregator" /&gt;
	&lt;/bean&gt;
...</pre></li><li><p>Use the following procedure to upload the module. Note that if this were a JAR file, the <code class="code">module upload</code> command could be used.</p><div class="orderedlist"><ol type="a" compact><li><p>Under the <code class="code">XD_HOME</code> directory, create the <code class="code">custom-modules/job/basic_example/config</code> subdirectories.</p></li><li><p>Copy the <code class="code">batch-basic/basic_example.xml</code> file from the course labs installation directory, to the 
							  <code class="code">&lt;XD_HOME&gt;custom_modules/job/basic_example/config</code> directory.</p></li></ol></div></li><li><p>From the Spring XD shell, run the <code class="code">module list</code> command and verify the module appears in the list of Job modules.</p></li><li><p>From the XD shell, create a new Spring XD batch job using the <code class="code">job create</code> command.</p><pre class="programlisting">xd:&gt;job create --name myBatchJob --definition "basic_example" --deploy
Successfully created and deployed job 'myBatchJob'
xd:&gt;</pre></li><li><p>Launch the job, using the <code class="code">job launch</code> command.</p><pre class="programlisting">xd:&gt;job launch myBatchJob
Successfully submitted launch request for job 'myBatchJob'
xd:&gt;</pre></li><li><p>Verify the job completed successfully.</p><p>Open the admin UI, navigate to the Job Executions page, and verify the status of the job is "COMPLETED".
					  Click on the "Details" icon (magnifying glass) of your job and examine the information shown such as the duration and steps.
					  Feel free to check out other areas such as the Modules, Definitions, and Deployments tabs.</p><p>Navigate to your <code class="code">$HOME</code> directory, and examine the contents of the <code class="code">sample1out.txt</code> file.
					  You should see that the commas have been replaced with spaces.</p></li></ol></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="advanced-streams-lab.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="customizing-jobs-lab.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;4.&nbsp;Advanced Streams&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.spring.io" title="The Spring Framework">Spring By Pivotal</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Customizing Jobs</td></tr></table></div></body></html>